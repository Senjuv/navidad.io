<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/media/arbol-de-navidad.png">
    <link rel="stylesheet" href="/index.css">
    <title>Feliz navidadüéÖ</title>
   
</head>

<body> 
    <nav>
        <ul class="menu">
            <li class="dropdown">
                <a href="#" onclick="toggleMenu()"><img class="pic-2" src="/media/menu-principal (1).png"
                        alt="Men√∫"></a> <!-- Al hacer clic se despliega el submen√∫ -->
                <ul class="dropdown-content">
                    <li>
                        <a href="#" onclick="mostrarCalendario()">
                            <img class="pic-2" src="/media/dia-de-navidad.png" alt="dia-de-navidad">
                        </a>
                    </li>
                    <li>
                        <a href="/beta/index.html">
                            <img class="pic-2" src="/media/carta.png" alt="carta">
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </nav>
    
    <section class="section">
        <div>
            <p class="message-1">ayuda a santa a recuperar sus regalos!!</p>
        </div>
        
        <table class="table">
            <tbody>
                <!-- Fila 1 -->
                <tr class="tr">
                    <td class="th-5"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"></td>
                    <td class="th-5">
                        <img id="santa" class="pic-5" src="/media/vecteezy_funny-cartoon-character-of-christmas-santa-claus_12224867.png" alt="santa">
                    </td>
                </tr>
                <!-- Fila 2 -->
                <tr class="tr">
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                </tr>
                <!-- Fila 3 -->
                <tr class="tr">
                    <td class="th-5"><img class="pic-5" src="/media/a23d4d7e7bddd400832cd3726586e214.png" alt="grinch"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"></td>
                </tr>
                <!-- Fila 4 -->
                <tr class="tr">
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                </tr>
                <!-- Fila 5 -->
                <tr class="tr">
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                </tr>
                <!-- Fila 6 -->
                <tr class="tr">
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"><img class="pic-5" src="/media/a23d4d7e7bddd400832cd3726586e214.png" alt="grinch"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"></td>
                </tr>
                <!-- Fila 7 -->
                <tr class="tr">
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                </tr>
                <!-- Fila 8 -->
                <tr class="tr">
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5"></td>
                    <td class="th-5 barril"><img class="pic-5" src="/media/63959675_9549840.png" alt="barriles"></td>
                    <td class="th-5"><img class="pic-5" src="/media/33620988_hjdr_4tw5_221017.svg" alt="meta"></td>
                </tr>
            </tbody>
        </table>
        <div class="grl4">
            <div></div>
            <div>
                <button onclick="moverArriba()">arriba</button>
            </div>
            <div></div>
            <div>
                <button onclick="moverIzquierda()">izquierda</button>
            </div>
            <div>
                <button onclick="moverAbajo()">abajo</button>
            </div>
            <div>
                <button onclick="moverDerecha()">derecha</button>
            </div>
        </div>
    </section>

    <!-- Fondo oscuro que aparece cuando el calendario est√° visible -->
    <div id="fondoOscuro" onclick="cerrarCalendario()"></div>

    <!-- Contenedor para el calendario -->
    <div id="calendario">
        <div id="fechaCalendario"></div>
        <button onclick="cerrarCalendario()">Cerrar Calendario</button>
    </div>

    <footer>
        <div class="grl3">
            <div>
                <p>Creado por <strong>Miguel</strong>. Todos los derechos reservados &copy; 2024.</p>
            </div>
            <div></div>
            <div><a href="https://www.instagram.com/sanchez.d_miguel/?__pwa=1#"><img class="pic-4"
                        src="/media/1384031.png" alt=""></a></div>
        </div>
    </footer>

<!-- Audios -->
<audio id="audioEspecial" src="/media/videoplayback (1).m4a"></audio>
<audio id="audioNormal" src="/media/videoplayback.m4a"></audio>

<script>
    // Funci√≥n para alternar la visibilidad del submen√∫
    function toggleMenu() {
        const subMenu = document.querySelector('.dropdown-content');
        subMenu.style.display = subMenu.style.display === 'block' ? 'none' : 'block';
    }

    // Mostrar el calendario
    function mostrarCalendario() {
        const calendarioDiv = document.getElementById('calendario');
        const fondoOscuro = document.getElementById('fondoOscuro');
        const fechaCalendario = document.getElementById('fechaCalendario');

        // Mostrar el calendario y el fondo oscuro
        calendarioDiv.style.display = 'block';
        fondoOscuro.style.display = 'block';

        // Obtener la fecha actual
        const fecha = new Date();
        const dia = fecha.getDate();
        const mes = fecha.getMonth(); // Mes 0-11
        const a√±o = fecha.getFullYear();

        // Establecer el t√≠tulo con la fecha actual
        fechaCalendario.innerHTML = `<h3>Calendario: ${dia}/${mes + 1}/${a√±o}</h3>`;

        // Generar el calendario
        generarCalendario(a√±o, mes, dia);

        // No se reproduce la m√∫sica al abrir el calendario
    }

    function generarCalendario(a√±o, mes, diaActual) {
        const diasDelMes = new Date(a√±o, mes + 1, 0).getDate();
        const primerDiaDelMes = new Date(a√±o, mes, 1).getDay();

        let calendarioHTML = '<table>';
        calendarioHTML += '<tr>';

        // Nombre de los d√≠as
        const diasSemana = ['Dom', 'Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b'];
        for (let dia of diasSemana) {
            calendarioHTML += `<th>${dia}</th>`;
        }

        calendarioHTML += '</tr><tr>';

        // Espacios en blanco hasta el primer d√≠a del mes
        for (let i = 0; i < primerDiaDelMes; i++) {
            calendarioHTML += '<td></td>';
        }

        // Generar los d√≠as del mes
        for (let i = 1; i <= diasDelMes; i++) {
            let claseDia = '';

            // Estilo especial para el 24 y 25 de diciembre
            if (i === 24 || i === 25) {
                claseDia = 'dia-festivo';
            }

            // Estilo especial para el d√≠a actual
            if (i === diaActual) {
                claseDia = 'dia-actual';
            }

            calendarioHTML += `<td class="${claseDia}">${i}</td>`;

            // Cambiar de fila cada 7 d√≠as
            if ((i + primerDiaDelMes) % 7 === 0) {
                calendarioHTML += '</tr><tr>';
            }
        }

        calendarioHTML += '</tr></table>';

        // Mostrar el calendario generado
        document.getElementById('fechaCalendario').innerHTML += calendarioHTML;
    }

    function cerrarCalendario() {
        const calendarioDiv = document.getElementById('calendario');
        const fondoOscuro = document.getElementById('fondoOscuro');
        calendarioDiv.style.display = 'none'; // Ocultar el calendario
        fondoOscuro.style.display = 'none'; // Ocultar el fondo oscuro
    }

    // Funci√≥n para reproducir m√∫sica solo en la p√°gina /beta/game.html
    function reproducirMusica() {
        const audioNormal = document.getElementById('audioNormal');

        // Verificar si estamos en la p√°gina /beta/game.html
        if (window.location.pathname.includes('/beta/game.html')) {
            audioNormal.play();
        }
    }

    // Reproducir m√∫sica al cargar la p√°gina solo si estamos en /beta/game.html
    document.addEventListener('DOMContentLoaded', function () {
        reproducirMusica();
    });


    const santa = document.querySelector('#santa');
let currentRow = 0;
let currentCol = 5;
const initialRow = 0; // Fila inicial de Santa
const initialCol = 5; // Columna inicial de Santa

function moverArriba() {
    if (currentRow > 0 && !isBarril(currentRow - 1, currentCol)) {
        currentRow--;
        moveSanta();
        checkMeta();
    }
}

function moverAbajo() {
    if (currentRow < 7 && !isBarril(currentRow + 1, currentCol)) {
        currentRow++;
        moveSanta();
        checkMeta();
    }
}

function moverIzquierda() {
    if (currentCol > 0 && !isBarril(currentRow, currentCol - 1)) {
        currentCol--;
        moveSanta();
        checkMeta();
    }
}

function moverDerecha() {
    if (currentCol < 5 && !isBarril(currentRow, currentCol + 1)) {
        currentCol++;
        moveSanta();
        checkMeta();
    }
}

function moveSanta() {
    // Cambiar la clase de la celda de Santa seg√∫n la fila y columna
    const celda = document.querySelectorAll('.tr')[currentRow].children[currentCol];
    celda.appendChild(santa);  // Mueve Santa a la celda correcta
}

function isBarril(row, col) {
    const celda = document.querySelectorAll('.tr')[row].children[col];
    return celda.classList.contains('barril');
}

function isGrinch(row, col) {
    const celda = document.querySelectorAll('.tr')[row].children[col];
    return celda.querySelector('img') && celda.querySelector('img').alt === 'grinch';
}

function checkMeta() {
    const celda = document.querySelectorAll('.tr')[currentRow].children[currentCol];
    if (celda.querySelector('img') && celda.querySelector('img').alt === 'meta') {
        // Si Santa llega a la meta, redirigir
        window.location.href = 'won.html';  // Cambia esta URL por la que desees
    }

    // Si Santa pasa por el Grinch, volver a la posici√≥n inicial
    if (isGrinch(currentRow, currentCol)) {
        currentRow = initialRow;
        currentCol = initialCol;
        moveSanta();
        Swal.fire({
  icon: "error",
  title: "Oops...",
  text: "¬°Oh no! \n ¬°Santa ha sido atrapado!",
  
});
    }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>

</html>
